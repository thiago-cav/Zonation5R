---
output: 
  github_document:
    toc: false
    toc_depth: 2
---
```{r, setup, include=FALSE, eval=FALSE}
knitr::opts_chunk$set(
  eval = FALSE,
  message = FALSE,
  warning = FALSE
)

```

# **ZonationR** <a href="https://thiago-cav.github.io/ZonationR/"><img src="man/figures/logo.png" align="right" height="120" alt="ZonationR website" /></a>

## **A toolkit for integrating and executing Zonation 5 software directly from R**

<!-- badges: start -->
[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)  
[![R-CMD-check](https://github.com/thiago-cav/Zonation5R/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/thiago-cav/Zonation5R/actions/workflows/R-CMD-check.yaml)
[![Codecov test coverage](https://codecov.io/gh/thiago-cav/ZonationR/graph/badge.svg)](https://app.codecov.io/gh/thiago-cav/ZonationR)
<!-- badges: end -->

#### **Overview**

ZonationR is an R package that provides an interface to integrate and execute Zonation 5 software directly from R. The package was developed to support teaching and learning, lowering the entry barrier for R users to get started with Zonation and explore spatial prioritization techniques, while also supporting reproducible and automated workflows.

Standard Zonation workflows typically require manual preparation of input files, execution through a graphical interface or command line, and separate post-processing in R or GIS software. These steps increase complexity and can hinder learning, reproducibility, and efficient workflow development. ZonationR addresses these challenges by enabling direct access to Zonation 5 from R and automating input generation, execution, and output handling within a transparent, script-based workflow that remains fully consistent with the original Zonation software.

#### **Installation**

You can install the development version of *ZonationR* from [GitHub](https://github.com/thiago-cav/ZonationR) with:
  
```{r, eval=F}
if (!require(devtools)) install.packages("devtools")
devtools::install_github("thiago-cav/ZonationR")
```

#### **Before you begin**

*ZonationR* is an interface to Zonation 5, which means that Zonation must be able to read and write files on disk. To ensure this works smoothly, it is recommended that you run the analysis inside an **R project** whose directory is writable.

Before running the examples below, please make sure that:

- **Zonation 5 is installed** on your system  
- You know the **path to the Zonation 5 installation directory**  
- Your **current R project directory is writable**

All input and output files generated by *ZonationR* will be created within the current R project directory.

#### **Getting started**

This is a basic example to get a setup running with *ZonationR*. All files are created within the current R project, and the biodiversity input data used here are provided with the package.

```{r, eval = FALSE, message = FALSE, results = 'hide', warning = FALSE}
# Load necessary libraries
library(ZonationR)
```

#### **Prepare input data**

First, we copy the example biodiversity data provided with the package into a local directory. These raster layers will be used as features in the Zonation analysis.

```{r, eval = FALSE, message = FALSE, results = 'hide', warning = FALSE}
#----------------------------------------------------
# Create a folder for biodiversity input data
#----------------------------------------------------
dir.create("biodiversity", showWarnings = FALSE)

extdata_path <- system.file("extdata", "biodiversity", package = "ZonationR")
file.copy(list.files(extdata_path, full.names = TRUE),
          "biodiversity", overwrite = TRUE)

```


#### **Zonation 5 setup**

Next, we create the three compulsory input files required by Zonation 5. The `zonation_path` argument must point to the directory where Zonation 5 is installed on your system.

```{r, eval = FALSE, message = FALSE, results = 'hide', warning = FALSE}
# Create feature list file
feature_list(spp_file_dir = "biodiversity")

# Create settings file
settings_file(feature_list_file = "feature_list.txt")

# Create the Zonation command file
command_file(zonation_path = "C:/Program Files (x86)/Zonation5")

```

#### **Run the prioritization**

Finally, we run the Zonation 5 analysis. All outputs will be written to the project directory following the standard Zonation folder structure.

```{r, , eval = FALSE, message = FALSE, results = 'hide', warning = FALSE}

run_command_file(".")

```

